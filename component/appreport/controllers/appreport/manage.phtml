<?php if(in_array($action,array('add','update'))):?>    <form method="post" class="frm_rpt_manager" action="<?php echo App::Config()->baseUrl('/appreport/manage/');?>">    <input type="hidden" name="data[AppReportCode][id]" value="<?php echo $this->getRptId(); ?>" />    <?php App::Helper('Toolbar')->setTitle("Report Builder")->setBtnBack()->Render(array('code'=>'report_update_top')); ?>    <?php       $DataGrid = App::Module('DataGrid')        ->setDisplay('FormListing')        ->addRow('Name',App::load("Helper/Html")->inputTag("data[AppReportCode][name]",App::Component('appReport')->Helper('Data')->Report($this->getRptId(),'name'),array("id"=>"name","class"=>"app_input check_notempty")) )        ->addRow('Group',App::CategorySet('appreportgroup')->Tag("data[AppReportCode][groups]",App::Component('appReport')->Helper('Data')->Report($this->getRptId(),'groups'),array('inputType'=>'checkboxTag')));        if(strtolower($action) != 'add'){            $DataGrid->addRow('',App::Html()->linkTag(App::Config()->baseUrl("/appreport/updatecode/" . $this->getRptId()),'EDIT CODE'));		}        $DataGrid->Render();    ?>	    <?php App::Helper('Toolbar')->setBtnSave()->setBtnCustomHTML('<input type="button" value="Apply" onclick="popup(\'' . $this->getRptId() . '\')" /> <input type="button" value="Export" onclick="reportexport(\'' . $this->getRptId() . '\')" /> <input type="button" value="<< Back" onclick="javascript:history.go(-1)" /> <div class="message" style="height:16px;width:250px;display:inline-block"></div>')->setFormJustified(true)->Render(array('code'=>'report_update_bottom')); ?>    <?php  App::Helper('JavaScript')->setAjax(array("debug"=>false,"autoHide"=>false))->appForm('.frm_rpt_manager');?>    </form><?php else :?>    <?php App::Helper('Toolbar')->setTitle("Report Builder")->setBtnBack()->Render(array('code'=>'report_manage_top')); ?>	<?php $reports = App::Component('appReport')->Helper('Data')->Report();?>    <?php if(!empty($reports['data'])):?>        <?php            $Grid = App::Module('DataGrid')->clear()->setHeader(array('ID','Reports','KEY','Options'));        ?>        <?php foreach($reports['data'] as $key=>$row):?>        <?php			$Grid->addRow(				$row['id'],                				'<b>' . App::load("Helper/Html")->linkTag($this->baseurl('/appreport/manage/update/' . $row['id']),$row['name']) . '</b><br /><br />' .				App::CategorySet('appreportgroup')->idToName($row['groups'],'Yes'),				$row['code'],				App::load("Helper/Html")->linkTag($this->baseurl('/appreport/manage/update/' . $row['id']),App::load("Helper/Html")->imgTag($this->baseurl('/images/admin/edit.gif'),NULL,array('title'=>'Edit','alt'=>'Edit')))	. ' ' .				App::load("Helper/Html")->linkTag($this->baseurl('/appreport/manage/delete/' . $row['id']),App::load("Helper/Html")->imgTag($this->baseurl('/images/admin/remove.gif'),NULL,array('title'=>'Delete','alt'=>'Delete')),array('class'=>'confirm-link icon'))                 						);        ?>        <?php endforeach;?>	        <?php $Grid->Render();?>    <?php else:?>        <?php echo $this->callElement('default/tools/message', array('caption' =>'Message','type' => 'error', 'message' => 'No report found'));?>    <?php endif;?>    <?php App::Helper('Toolbar')->Render(array('code'=>'report_manage_bottom')); ?><?php endif;?>	<script type="text/javascript">    function popup(id){        var win = window.open(siteInfo.baseUrl + '/appreport/execute/' + id ,'name','resizable=1,menubar=1,scrollbars=1,height=600,width=800');	        if(win.focus()){            win.focus();        }    }		function reportexport(id){        window.location = siteInfo.baseUrl + '/appreport/export/' + id;    }</script>